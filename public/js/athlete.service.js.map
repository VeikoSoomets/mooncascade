{"version":3,"sources":["athlete.service.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;YAQA;gBAGC,wBAAoB,IAAU;oBAAV,SAAI,GAAJ,IAAI,CAAM;oBAFtB,YAAO,GAAG,IAAI,cAAO,CAAC,EAAC,cAAc,EAAE,kBAAkB,EAAC,CAAC,CAAC;gBAElC,CAAC;gBAEnC,oCAAW,GAAX;oBACI,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC;yBAC3B,SAAS,EAAE;yBACX,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC;yBACZ,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;gBAC3C,CAAC;gBAEO,mCAAU,GAAlB,UAAmB,QAAkB;oBACpC,IAAI,OAAiB,CAAC;oBACtB,IAAI,QAAQ,GAAG,QAAQ,CAAC,IAAI,EAAE,CAAC,IAAiB,CAAC;oBACjD,QAAQ,CAAC,OAAO,CAAC,UAAS,OAAO,EAAE,KAAK;wBACvC,QAAQ,CAAC,KAAK,CAAC,CAAC,aAAa,CAAC,OAAO,CAAC,UAAS,OAAO,EAAE,OAAO;4BAC9D,IAAI,IAAI,GAAG,IAAI,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;4BACvE,QAAQ,CAAC,KAAK,CAAC,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC,QAAQ,EAAE,GAAC,GAAG,GAAC,IAAI,CAAC,UAAU,EAAE,GAAC,GAAG,GAAC,IAAI,CAAC,UAAU,EAAE,CAAC;wBACjH,CAAC,CAAC,CAAC;wBACH,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,KAAK,GAAC,CAAC,CAAC,CAAC,CAAC,CAAC;wBAE1B,CAAC;oBACF,CAAC,CAAC,CAAC;oBACH,MAAM,CAAC,QAAQ,CAAC;gBACjB,CAAC;gBAEO,oCAAW,GAAnB,UAAoB,KAAU;oBAC7B,OAAO,CAAC,KAAK,CAAC,mBAAmB,EAAE,KAAK,CAAC,CAAC;oBACxC,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,IAAI,KAAK,CAAC,CAAC;gBACjD,CAAC;gBAEO,2CAAkB,GAA1B,UAA2B,KAAK,EAAE,SAAS,EAAE,SAAS;oBAClD,EAAE,CAAC,CAAC,SAAS,IAAI,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;wBAC5B,IAAI,CAAC,GAAG,SAAS,GAAG,KAAK,CAAC,MAAM,CAAC;wBACjC,OAAO,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC;4BACf,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;wBAC1B,CAAC;oBACL,CAAC;oBACD,KAAK,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,EAAE,KAAK,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC1D,MAAM,CAAC,KAAK,CAAC;gBACjB,CAAC;gBA1CF;oBAAC,iBAAU,EAAE;;kCAAA;gBA2Cb,qBAAC;YAAD,CA1CA,AA0CC,IAAA;YA1CD,2CA0CC,CAAA","file":"athlete.service.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport { Headers, Http, Response } from '@angular/http';\n\nimport 'rxjs/add/operator/toPromise';\n\nimport { Athlete } from './athlete';\n\n@Injectable()\nexport class AthleteService {\n\tprivate headers = new Headers({'Content-Type': 'application/json'});\n\n\tconstructor(private http: Http) { }\n\n\tgetAthletes(): Promise<Athlete[]> {\n\t    return this.http.get('/athletes')\n\t    \t\t   .toPromise()\n\t    \t\t   .then(this.mapAthlete)\n               \t   .catch(this.handleError);\n\t}\n\n\tprivate mapAthlete(response: Response): Athlete[]{\n\t\tlet indexes: number[];\n\t\tlet athletes = response.json().data as Athlete[];\n\t\tathletes.forEach(function(athlete, index){\n\t\t\tathletes[index].timing_points.forEach(function(t_point, t_index) {\n\t\t\t\tvar date = new Date(athletes[index].timing_points[t_index].pivot.time);\n\t\t\t\tathletes[index].timing_points[t_index].pivot.time = date.getHours()+':'+date.getMinutes()+':'+date.getSeconds();\n\t\t\t});\n\t\t\tif (!!athletes[index-1]) {\n\t\t\t\t// if(athletes[index-1].timing_points[0].pivot.time)\n\t\t\t}\n\t\t});\t\t\t\n\t\treturn athletes;\n\t}\n\n\tprivate handleError(error: any): Promise<any> {\n\t\tconsole.error('An error occurred', error);\n\t  \treturn Promise.reject(error.message || error);\n\t}\n\n\tprivate moveElementInArray(array, old_index, new_index): any[] {\t\t\n\t    if (new_index >= array.length) {\n\t        var k = new_index - array.length;\n\t        while ((k--) + 1) {\n\t            array.push(undefined);\n\t        }\n\t    }\n\t    array.splice(new_index, 0, array.splice(old_index, 1)[0]);\n\t    return array;\n\t}\n}"],"sourceRoot":"/source/"}